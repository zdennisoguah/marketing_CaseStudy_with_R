# Marketing Case Study with R
CASE STUDY: Bellabeat Fitness Data Analysis
[Link to the project](https://z7ytl0-dennis-oguah.shinyapps.io/cap_proj_bellabeat/)
##### Author: Dennis Oguah

##### Date: October 12, 2023

> Bellabeat is a high-tech company that manufactures health-focused smart products. Collecting data on daily activity, sleep, stress, and reproductive health has allowed Bellabeat to empower women with knowledge about their health and habits. Since it was founded in 2013, Bellabeat has grown rapidly and quickly positioned itself as a tech-driven wellness company for women.

_The case study follows the six-step data analysis process:_

### ‚ùì [Ask](#1-ask)
### üíª [Prepare](#2-prepare)
### üõ† [Process](#3-process)
### üìä [Analyze](#4-analyze)
### üìã [Share](#5-share)
### üö≤ [Act](#6-act)

## 1. Ask
Key Stakeholders Ur≈°ka Sr≈°en: Cofounder and Chief Creative Officer Sando Mur: Cofounder and Mathematician Bellabeat marketing analytics team.
Secondary stakeholders: Bellabeat analytical team

Business Task Analyze smart device usage data to gain insight into how consumers use non-Bellabeat smart devices.

I am applying these insights to the Bellabeat app

What are some trends in smart device usage? How could these trends apply to Bellabeat customers? How could these trends help influence Bellabeat's marketing strategy?

## 2. Prepare 
**2.1 Information on Data Source:**
The data is publicly available on [Kaggle](https://www.kaggle.com/datasets/arashnic/fitbit/data): FitBit Fitness Tracker Data and stored in 18 CSV files.
It was generated by respondents from a distributed survey via Amazon Mechanical Turk between 12th March 2016 and 12th May 2016.
30 Fitbit users who consented to the submission of personal tracker data.
Data collected includes and would be focused on

* (1) Daily activity
* (2) hourly calories
* (3) Sleep monitoring
* (4) Intensities
* (5) steps.


**2.2 Limitations of Data Set:**
Data was collected from the year 2016. Users' daily activity, fitness and sleeping habits, diet, and food consumption may have changed since then, hence data may not be timely or relevant.
The sample size of 30 female FitBit users does not represent the entire female population.
As data is collected in a survey, hence unable to ascertain the integrity or accuracy of data.

**2.3 Is Data ROCCC?**
A good data source is ROCCC which stands for Reliable, Original, Comprehensive, Current, and Cited.

* Reliable - LOW - Not reliable as it only has 30 respondents
* Original - LOW - Third-party provider (Amazon Mechanical Turk)
* Comprehensive - MED - Parameters match most of Bellabeat's products' parameters
* Current - LOW - Data is 5 years old and is not relevant
* Cited - LOW - Data collected from third party, hence unknown

Overall, the dataset is considered bad quality data and it is not recommended to produce business recommendations based on this data but it is what is required for this project.

## 3. Process
Examine the data, check for NA, and remove duplicates for all imported tables: activity, sleep, calories, intensities, steps, and weight:
##### Import necessary data files and rename them
```{r}
activity <- read.csv("Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
calories <- read.csv("Fitabase Data 4.12.16-5.12.16/hourlyCalories_merged.csv")
intensities <- read.csv("Fitabase Data 4.12.16-5.12.16/hourlyIntensities_merged.csv")
sleep <- read.csv("Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
weight <- read.csv("Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
h_steps <- read.csv("Fitabase Data 4.12.16-5.12.16/hourlySteps_merged.csv")
```
Now that I have imported all of the data frames I will be using, I am ready to start cleaning the data. I will take a look at each data frame to familiarize myself with the data and to check for errors.



##### check properties of imported data
```{r}
str(activity)
colnames(activity)
head(activity)
```
 [1] "Id"                       "ActivityDate"             "TotalSteps"              
 [4] "TotalDistance"            "TrackerDistance"          "LoggedActivitiesDistance"
 [7] "VeryActiveDistance"       "ModeratelyActiveDistance" "LightActiveDistance"     
[10] "SedentaryActiveDistance"  "VeryActiveMinutes"        "FairlyActiveMinutes"     
[13] "LightlyActiveMinutes"     "SedentaryMinutes"         "Calories"      

<img width="623" alt="196822184-bdaf0ad6-e22b-4000-85ab-43b647e28727" src="https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/2f79d804-0746-414b-8765-99ea149f0132">

It's clear activity has the most data logged and also has data from other datasets merged in

```{r}
str(calories)
head(calories)
```
'data.frame':	22099 obs. of  3 variables:
 $ Id          : num  1.5e+09 1.5e+09 1.5e+09 1.5e+09 1.5e+09 ...
 $ ActivityHour: chr  "4/12/2016 12:00:00 AM" "4/12/2016 1:00:00 AM" "4/12/2016 2:00:00 AM" "4/12/2016 3:00:00 AM" ...
 $ Calories    : int  81 61 59 47 48 48 48 47 68 141 ...

 Same process should be repeated for the rest of the uploaded data
Basics cleaning:
  Now, I'm going to Process, Clean and Organize the dataset for analysis. 

  Here are some cleaning steps taken with the data :

    + verifying number of users with distinct ID
    + checking for duplicates and removing duplicates
    + cleaning columns
    + consistency of date and time formats 
# Verifying the number of users
```{r}
n_unique(activity$Id)
n_unique(sleep$Id)
n_unique(weight$Id)
n_unique(calories$Id)
n_unique(intensities$Id)
n_unique((h_steps$Id))

```
[1] 33
[1] 24
[1] 8
[1] 33
[1] 33
[1] 33
 > As we can see activity, calories, hourly steps and intensities have 33 unique identifiers, sleep has 24 and weight has 8. Weight doesn't have enough participants to provide valuable insight so we would proceed without it.

Now we check and remove duplicates

```{r}
sum(duplicated(activity))
sum(duplicated(calories))
sum(duplicated(sleep))
sum(duplicated(h_steps))
sum(duplicated(intensities))
```
[1] 0
[1] 0
[1] 3
[1] 0
[1] 0

Now we remove duplicates from the sleep data set and confirm it has been removed
```{r}
sleep <- sleep %>%
  distinct() %>%
  drop_na()
sum(duplicated(sleep))
```
[1] 0

+ Clean and rename columns
We ensure column names are using the right syntax, and format and are all lowercase in all datasets as they will be merged later on.

```{r}
activity<- rename_with(activity, tolower)
head(activity)
sleep <- rename_with(sleep, tolower)
h_steps <- rename_with(h_steps, tolower)
head(h_steps)
calories <- rename_with(calories, tolower)
head(calories)
intensities <- rename_with(intensities, tolower)
head(intensities)
```
![Capstone_project - 6a53d0600054468bbd03720c6ce442df app posit cloud copy](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/51b90ad0-6628-4749-b9a4-469e4557b251)

## Consistency of date and time columns

> Now the focus is on cleaning date-time format for activity(changing it from chr to date), sleep, h_steps, calories and intensities since we will merge some of the data frames. Since we can disregard the time on daily_sleep data frame we are using as_date instead as as_datetime

```{r change chr format to date time}
# change all date columns in necessary data frames to date-time format
activity$activitydate <- as.Date(activity$activitydate, "%m/%d/%Y")
sleep$sleepday <- as.Date(sleep$sleepday, "%m/%d/%Y")
calories$activityhour <- as.Date(calories$activityhour, "%m/%d/%Y")
h_steps$activityhour <- as.Date(h_steps$activityhour, "%m/%d/%Y")
intensities$activityhour=as.POSIXct(intensities$activityhour, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
intensities$time <- format(intensities$activityhour, format = "%H:%M:%S")
intensities$date <- format(intensities$activityhour, format = "%m/%d/%y")
```

```{r}
# Rename all date-time formatted columns to the same name for merging
activity <- activity %>%
  rename(date = activitydate)
sleep <- sleep %>% 
  rename(date = sleepday)
calories <- calories %>%
  rename(date = activityhour)
h_steps <- h_steps %>%
  rename(date = activityhour)
#intensities <- intensities %>%
#  rename(date = activityhour)
```
## Perform a check to see if there are any missing (NA) values in the data frame.
```{r}
# Check the sum of empty values in every data frame:
print("NA values in activity dataframe:")
sum(is.na(activity))
print("NA values in calories dataframe:")
sum(is.na(calories))
print("NA values in sleep dataframe:")
sum(is.na(sleep))
print("NA values in h_steps dataframe:")
sum(is.na(h_steps))
print("NA values in intensities dataframe:")
sum(is.na(intensities))
```
[1] "NA values in activity dataframe:"
[1] 0
[1] "NA values in calories dataframe:"
[1] 0
[1] "NA values in sleep dataframe:"
[1] 0
[1] "NA values in h_steps dataframe:"
[1] 0
[1] "NA values in intensities dataframe:"
[1] 0

## 4. Analyze
As we can see there are no missing values in any of our data frames so we can proceed with the data and check the summary statistics for the data frame
```{r}
print("Summary statistics for activity dataframe:")
activity %>%  
  select(totalsteps,
         totaldistance, lightlyactiveminutes, veryactiveminutes, fairlyactiveminutes, sedentaryminutes, calories) %>%
summary(activity)
print("Summary statistics for calories dataframe:")
summary(calories)
print("Summary statistics for sleep dataframe:")
summary(sleep)
print("Summary statistics for h_steps dataframe:")
summary(h_steps)
print("Summary statistics for intensities dataframe:")
summary(intensities)
```
![image](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/c907078c-dd93-432c-aae2-742f67f08144)

#### Key findings from data
+ The average sedentary time is too high. The business needs to find ways to reduce this with smart features.
+ The majority of the participants are lightly active. With a high sedentary time.
+ Participants on average sleep 1 time for an average of 7 hours daily.
+ On average, participants burned 2,304 calories per day. Average adult women expend roughly 1,600 to 2,400 calories per day versus 2,000 to 3,000 for adult men.
+ Average total steps per day (which is 7638) is a little bit less than recommended by the CDC. According to the CDC research, taking 8,000 steps per day was associated with a 51% lower risk for all-cause mortality (or death from all causes). And taking 12,000 steps per day was associated with a 65% lower risk compared with taking 4,000 steps


# 5. Share phase 
We will now analyze trends of the users of Fitbit using the data of the participants and determine if it can help shape BellaBeat's marketing strategy and answer what trends are available in smart device usage.

+ 5.1 Merge relevant data sets
We merge activity and sleep to see any correlation between variables by using id and date as their primary keys.
```{r}
merge_activity_sleep <- merge(sleep, activity, by=c('id', 'date'))
head(merge_activity_sleep)
```
![FireShot Capture 003 - Capstone_project - 6a53d0600054468bbd03720c6ce442df app posit cloud copy](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/409fcab1-9cf6-4f1f-a58b-53e68e16d67d)

## 5.2 Visualizations 
Here we create visualizations and communicate findings based on analysis.

Visualizing the relationship between steps taken and calories burnt
```{r}
ggplot(data=activity, aes(x=totalsteps, y=calories)) + 
  geom_point() + geom_smooth() + labs(title="Total Steps vs. Calories burnt")
```
![image](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/6d1ed17b-9836-4272-9b29-2f257f61d0b9)

+ There is a clear positive correlation between the total steps taken and calories burnt. The more steps participants took, the more calories they burnt.

## Now we visualize the relationship between time spent in bed and time spent asleep
```{r}
ggplot(data=sleep, aes(x=totalminutesasleep, y=totaltimeinbed)) + 
  geom_point()+ geom_smooth() + labs(title="Total Minutes Asleep vs. Total Time in Bed")
```
![000018](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/c2e4f62c-2b0a-46e7-b898-814e03698509)

+ There is a clear positive correlation between the total time participants spent in bed and the time they spent asleep. bellabeat can use this data to create features that would induce sleep

```{r}
int_new <- intensities %>%
  group_by(time) %>%
  drop_na() %>%
  summarise(mean_total_int = mean(totalintensity))

ggplot(data=int_new, aes(x=time, y=mean_total_int)) + geom_histogram(stat = "identity", fill='darkblue') +
  theme(axis.text.x = element_text(angle = 45)) +
  labs(title="Average Total Intensity vs. Time")
```
![000018 (2)](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/393ad618-d223-4eab-8a34-e1c567b9830d)

> After visualizing Total Intensity hourly, I found out that people are most active between 5 am and 10 pm.

Most activity happens between 5 pm and 7 pm - I suppose, that people go to a gym or for a walk after finishing work. We can use this time in the Bellabeat app to remind and motivate users to go for a run or walk.

+ A heat map will show users' activity level at one glance.
```{r}
h_step <- read.csv("Fitabase Data 4.12.16-5.12.16/hourlySteps_merged.csv")
h_step <- h_step %>% 
  rename(date_time= ActivityHour) %>% 
  mutate(date_time= as.POSIXct(date_time, format="%m/%d/%Y %I:%M:%S %p", tz= Sys.timezone()))

head(h_step)
h_step <- h_step %>% 
  separate(date_time, into= c("date", "time"), sep = " ") %>% 
  mutate(date= ymd (date))

head(h_step)
h_step_weekday <- (h_step)%>%
  mutate(weekday= weekdays(date))%>%
  group_by (weekday,time) %>% 
  summarize(average_steps= mean(StepTotal), .groups = 'drop')

h_step_weekday$weekday <- ordered(h_step_weekday$weekday, 
                                 levels=c("Monday", "Tuesday", "Wednesday","Thursday","Friday", "Saturday", "Sunday"))
                                 
head(h_step_weekday)
```
```{r}
ggplot(h_step_weekday, aes(x= time, y= weekday, 
                           fill= average_steps)) +
  theme(axis.text.x= element_text(angle = 90))+
  labs(title= "Active Time During the Week", 
       x=" ", y=" ",fill = "average\nsteps",
       caption= 'Data Source: Fitabase Data 4.12.16-5.12.16')+
  scale_fill_gradient(low= "white", high="blue2")+
  geom_tile(color= "white",lwd =.6,linetype =1)+
  coord_fixed()+
  theme(plot.title= element_text(hjust= 0.5,vjust= 0.8, size=16),
        panel.background= element_blank())
```
![000018 (3)](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/7f126acc-6782-40c4-9ed5-28e48a13f7ae)

Observation: Users start their day later on weekends, and are most active during 11 am-1 pm on Saturday, and 5-6 pm on Wednesday.

## Let's look at the relationship between sedentary minutes and time spent asleep
```{r}
ggplot(data=merge_activity_sleep, aes(x=totalminutesasleep, y=sedentaryminutes)) + 
geom_point(color='darkblue') + geom_smooth() +
  labs(title="Minutes Asleep vs. Sedentary Minutes")
```
![000018 (4)](https://github.com/zdennisoguah/marketing_CaseStudy_with_R/assets/15913685/8e8202bf-9488-4378-bde6-cf69bd42809c)

+ There negative relationship between Sedentary Minutes and Sleep time. this means that users need to reduce their sedentary time to improve sleep.

# 6. Act phase
> Major Findings:

+ The average daily step count is 7638, which is fewer than the CDC-recommended norm for adults of 8000 steps.
+ A day's worth of inactivity is typically 991 minutes. The majority of users' time is spent not being active.
+ The number of steps walked each day and the number of calories burnt is positively correlated.
+ The amount of time users spend in bed is directly linked to the amount of time they sleep.
+ Distance and calories burnt are found to be positively correlated.
+ The vast majority of individuals are sleep-deprived. They get under the required 8 hours of sleep daily
+ There is a negative correlation between sedentary minutes and sleep. This means the more time users spend being inactive, the less they sleep.
+ Users on average start their days later on weekends and are most active on Saturdays, they are also most active from 5-7 pm on weekdays.

> Recommendations:

+ Bellabeat can help consumers become less sedentary by motivating them to engage in more physical activity. Daily step counters and hourly notifications informing them they've been sedentary for too long should be Incorporated into the app to encourage users to move for a set duration every hour

+ Introducing programs and challenges for fitness and health incentives. The reward will come in the form of points, which can then be utilized to get deals on Bellabeat's goods and promotions.

+ Bellabeat can also include mindfulness features that encourage meditation to induce sleep during sedentary minutes and when in bed but not asleep.

+ Analysis suggests that the average amount of sleep is less than what is advised. It is possible that people do not use watches when sleeping since they can be uncomfortable. Bellabeat should promote Bellabeat Leaf more because of its wearability.
